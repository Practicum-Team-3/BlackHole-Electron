/**
 * @class ExploitOverview
 * @description Exploit List in the overview panel
 */
function ExploitListOverview(exploitListNode){
    
    this.nameForTabLabel = "ExploitList"
    this.exploitListNode = exploitListNode

    var sectionsContainer = document.createElement("div")
    sectionsContainer.className = "ExploitListOverviewSectionsContainer"
    sectionsContainer.style = "height:92%; width: 293px;"

    // Make an instance of NodeCombos to include html elements
    var interface = new NodeCombos(sectionsContainer)

    // Make sections of the exploit list overview panel
    var sections = ["exploitListCollapsibles", "exploitListOptions"]
    interface.addMultipleSections(sections)

    // Populate the collapsibles
    interface.selectNode(interface.getNodes()["exploitListCollapsibles"])
    interface.getNodes()["exploitListCollapsibles"].style = "height:85%; overflow-y:scroll; overflow-x:hidden; margin-bottom:2px;"
    interface.getNodes()["exploitListCollapsibles"].className = "exploitListCollapsibles bg-light"

    // Create a form to put all of the components in
    var formNode = document.createElement("form")
    //formNode.style ="background-color:red"
    formNode.className = "exploitListCollapsiblesForm"
    formNode.setAttribute("onSubmit", "return false")

    // Add a reference to formNode and append it
    interface.addReferenceToNode(formNode.className, formNode)
    interface.getNodes()["exploitListCollapsibles"].appendChild(formNode)

    // Select or point to form node to work on
    interface.selectNode(interface.getNodes()["exploitListCollapsiblesForm"])

    // Populate the form
    for (var i = 0; i < 5; i++){
        interface.addCollapsibleGroup("Exploit " + (i+1), "server")
        // General details of exploit
        interface.addLabelPair(null, "Name: ", "exploitName", "")
        interface.addLabelPair(null, "Type: ", "exploitType", "")
        interface.addLabelPair(null, "OS(s): ", "exploitOs", "")
        interface.addLabelPair(null, "Target Program: ", "exploitTarget", "test,</br>test2,</br>test3")

        //interface.addSingleButton("Delete Exploit", "col ml-1 mr-1 mt-2 btn btn-danger", function(){showToast("DeleteOnServer", "delete exploit from server was clicked")})
        interface.addEditDeleteButtons(null, function(){showToast("EditExploitOnServer", "editExploit on server was clicked")}, null, function(){showToast("DeleteExploitOnServer", "DeleteExploit was clicked")})

        // Select form again
        interface.selectNode(interface.getNodes()["exploitListCollapsiblesForm"])
    }


    // section at bottom of overview column
    interface.selectNode(interface.getNodes()["exploitListOptions"])
    interface.getNodes()["exploitListOptions"].style = "height:15%;"
    interface.getNodes()["exploitListOptions"].className = "container exploitListOptions bg-dark"

    //var optionButtons = {"Add Exploit_primary":null}
    //interface.addOverviewOptionsButtons(optionButtons)
    interface.addSingleButton("Upload Exploit", "col ml-1 mr-1 mt-2 btn btn-primary", function(){showToast("uploadExploit", "updload exploit to server was clicked")})

    this.exploitListNode.appendChild(sectionsContainer)

    //----------------------------------------

    this.getInterface = function(){
        return interface
    }

    this.getNode = function(nodeName){
        return this.getIntercace().getNodes()[nodeName]
    }

    this.getTabLabel = function(){
        return this.nameForTabLabel
    }

    this.setNode = function(element){
        this.exploitListNode = element
    }

    this.setExploits = function(exploit){
        for(var i = 0; i < exploit.length; i++){
            this.getNode("exploitName").innerHTML = exploit[i].getName()
            this.getNode("exploitOs").innerHTML = exploits[i].getOs()

        }
    }
}